<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>نظام وظیفه</title>

  <style>
    /* ===== Vazirmatn ===== */
    @font-face{
      font-family:"Vazirmatn";
      src:url("assets/fonts/vazirmatn/Vazirmatn-Regular.woff2") format("woff2");
      font-weight:400;
      font-style:normal;
      font-display:swap;
    }
    @font-face{
      font-family:"Vazirmatn";
      src:url("assets/fonts/vazirmatn/Vazirmatn-Medium.woff2") format("woff2");
      font-weight:500;
      font-style:normal;
      font-display:swap;
    }
    @font-face{
      font-family:"Vazirmatn";
      src:url("assets/fonts/vazirmatn/Vazirmatn-Bold.woff2") format("woff2");
      font-weight:700;
      font-style:normal;
      font-display:swap;
    }

    :root{
      --bg:#031a34;
      --bg-2:#052145;
      --text:#ffffff;
      --radius:18px;
      --acc-title:15px;
      --inner-card:14px;

      /* ✅ سورمه‌ای برای خود آیتم‌ها (نه سفید) */
      --tile-1: rgba(4, 30, 66, .62);
      --tile-2: rgba(4, 30, 66, .48);
      --tile-open-1: rgba(4, 30, 66, .68);
      --tile-open-2: rgba(4, 30, 66, .52);
      --tile-border: rgba(255,255,255,.12);
      --tile-border-open: rgba(255,255,255,.16);
      --tile-divider: rgba(255,255,255,.12);

      --subtile-1: rgba(10, 38, 66, .62);
      --subtile-2: rgba(10, 38, 66, .48);
      --subtile-border: rgba(255,255,255,.12);
    }

    html,body{height:100%}
    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:"Vazirmatn", Tahoma, Arial, sans-serif;
      background: linear-gradient(180deg,var(--bg),var(--bg-2));
      color:var(--text);
    }

    /* Back مثل صفحه سایر */
    .hubBack{
      position:fixed;
      top:16px;
      left:16px;
      z-index:999;

      background:rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.18);
      color:#fff;

      border-radius:999px;
      padding:8px 14px;
      font-size:12px;
      font-weight:700;
      line-height:1;
      cursor:pointer;
    }
    .hubBack:active{transform:scale(.98)}

    .wrap{
      max-width:860px;
      margin:150px auto 80px;
      padding:0 20px;
    }

    /* ===== Accordion items ===== */
    .accItem{
      background: linear-gradient(180deg, var(--tile-1), var(--tile-2));
      border:1px solid var(--tile-border);
      border-radius:var(--radius);
      margin-bottom:12px;
      overflow:hidden;

      box-shadow:
        0 10px 26px rgba(0,0,0,.18),
        inset 0 1px 0 rgba(255,255,255,.05);
    }

    .accBtn{
      width:100%;
      border:0;
      background:transparent;
      padding:12px 18px;
      min-height:50px;

      display:flex;
      align-items:center;
      gap:10px;

      cursor:pointer;
      font-size:var(--acc-title);
      font-weight:900;
      color:#fff;
    }

    .accChevron{
      width:26px;height:26px;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:transform .2s;
      opacity:.95;
      flex:0 0 auto;
    }
    .accChevron svg{width:24px;height:24px;fill:#fff}

    .accLabel{
      flex:1;
      text-align:right;
      line-height:1.25;
    }

    .divider{display:none;}

    .accPanel{
      display:none;
      padding:12px 16px 16px;
      border-top:1px solid var(--tile-divider);
    }

    .accItem[data-open="1"] .accPanel{display:block;}
    .accItem[data-open="1"] .accChevron{transform:rotate(180deg);}

    .accItem[data-open="1"]{
      background: linear-gradient(180deg, var(--tile-open-1), var(--tile-open-2));
      border-color: var(--tile-border-open);
      box-shadow:
        0 12px 30px rgba(0,0,0,.26),
        inset 0 1px 0 rgba(255,255,255,.07);
    }

    /* ===== Inner links ===== */
    .grid{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:2px;
    }

    .navyCard{
      background: linear-gradient(180deg, var(--subtile-1), var(--subtile-2));
      border:1px solid var(--subtile-border);
      border-radius:14px;
      padding:14px;

      color:#fff;
      text-decoration:none;

      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;

      font-weight:900;
      font-size:var(--inner-card);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
    }

    .navyCard .t{
      font-size:var(--inner-card);
      font-weight:900;
      line-height:1.25;
      color:#fff;
    }

    .navyCard .arrow{
      width:30px;height:30px;
      display:flex;
      align-items:center;
      justify-content:center;
      flex:0 0 auto;
      opacity:.9;
    }
    .navyCard .arrow svg{
      width:22px;height:22px;
      fill:#fff;
      transform:rotate(180deg);
    }

    .navyCard:active{transform:scale(.99)}

    .navyCard.disabled{
      opacity:.55;
      cursor:default;
      position:relative;
    }

    .badgeSoon{
      font-size:11px;
      font-weight:900;
      background:rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.18);
      padding:4px 10px;
      border-radius:999px;
      margin-inline-start:10px;
      white-space:nowrap;
      color:#fff;
    }

    /* =======================================================
       ✅ تنها تغییر: فقط کارتِ "اعزام به خدمت" (زیرِ اعزام)
       ======================================================= */
    .hub > .accItem:first-of-type .accPanel .navyCard{
      padding:10px 14px;                 /* باریک‌تر */
      background:rgba(255,255,255,.74);  /* نزدیک سفید، نه سفید کامل */
      border:1px solid rgba(229,231,235,.95);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
    }
    .hub > .accItem:first-of-type .accPanel .navyCard,
    .hub > .accItem:first-of-type .accPanel .navyCard .t{
      color:#041E42;                     /* متن سورمه‌ای */
    }
    .hub > .accItem:first-of-type .accPanel .navyCard .arrow svg{
      fill:#041E42;                      /* فلش سورمه‌ای */
    }
    /* ✅ اعمال همان استایل برای همه زیرمنوها */
.hub .accPanel .navyCard{
  padding:10px 14px;
  background:rgba(255,255,255,.74);
  border:1px solid rgba(229,231,235,.95);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
}

.hub .accPanel .navyCard,
.hub .accPanel .navyCard .t{
  color:#041E42;
}

.hub .accPanel .navyCard .arrow svg{
  fill:#041E42;
}

  </style>
</head>

<body>

  <button class="hubBack" type="button" id="backBtn">بازگشت</button>

  <main class="wrap">
    <section class="panel hub">

      <!-- اعزام -->
      <div class="accItem" data-open="0">
        <button class="accBtn" type="button" data-acc="toggle">
          <span class="accChevron" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M7.4 8.6 12 13.2l4.6-4.6 1.4 1.4-6 6-6-6z"/></svg>
          </span>
          <span class="accLabel">اعزام</span>
        </button>
        <div class="divider"></div>
        <div class="accPanel">
          <div class="grid">
            <a class="navyCard" href="nezam-ezam.html">
              <span class="t">اعزام به خدمت</span>
              <span class="arrow" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg>
              </span>
            </a>
          </div>
        </div>
      </div>

      <!-- معافیت -->
      <div class="accItem" data-open="0">
        <button class="accBtn" type="button" data-acc="toggle">
          <span class="accChevron" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M7.4 8.6 12 13.2l4.6-4.6 1.4 1.4-6 6-6-6z"/></svg>
          </span>
          <span class="accLabel">معافیت</span>
        </button>
        <div class="divider"></div>
        <div class="accPanel">
          <div class="grid">
            <a class="navyCard" href="moafiat-pezeshki.html">
              <span class="t">معافیت پزشکی</span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
            <a class="navyCard" href="kefalat.html">
              <span class="t">معافیت کفالت</span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
            <a class="navyCard" href="behzisti.html">
              <span class="t">معافیت مددجویان بهزیستی</span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
            <a class="navyCard" href="isargari.html">
              <span class="t">معافیت ایثارگری</span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
          </div>
        </div>
      </div>

      <!-- تحصیلی -->
      <div class="accItem" data-open="0">
        <button class="accBtn" type="button" data-acc="toggle">
          <span class="accChevron" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M7.4 8.6 12 13.2l4.6-4.6 1.4 1.4-6 6-6-6z"/></svg>
          </span>
          <span class="accLabel">معافیت تحصیلی و سنوات</span>
        </button>
        <div class="divider"></div>
        <div class="accPanel">
          <div class="grid">
            <a class="navyCard" href="moafiat-tahsili-dakheli.html">
              <span class="t">معافیت تحصیلی داخل کشور</span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
            <a class="navyCard" href="moafiat-tahsili-kharej.html">
              <span class="t">معافیت تحصیلی خارج کشور</span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
            <a class="navyCard disabled" href="#" data-disabled="1">
              <span class="t">سنوات تحصیلی <span class="badgeSoon">به‌زودی</span></span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
          </div>
        </div>
      </div>

      <!-- کارت‌ها -->
      <div class="accItem" data-open="0">
        <button class="accBtn" type="button" data-acc="toggle">
          <span class="accChevron" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M7.4 8.6 12 13.2l4.6-4.6 1.4 1.4-6 6-6-6z"/></svg>
          </span>
          <span class="accLabel">کارت‌ها</span>
        </button>
        <div class="divider"></div>
        <div class="accPanel">
          <div class="grid">
            <a class="navyCard disabled" href="#" data-disabled="1">
              <span class="t">المثنی کارت پایان خدمت <span class="badgeSoon">به‌زودی</span></span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
            <a class="navyCard disabled" href="#" data-disabled="1">
              <span class="t">المثنی کارت معافیت <span class="badgeSoon">به‌زودی</span></span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
            <a class="navyCard disabled" href="#" data-disabled="1">
              <span class="t">استعلام و اصالت کارت <span class="badgeSoon">به‌زودی</span></span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
          </div>
        </div>
      </div>

      <!-- مجوزها -->
      <div class="accItem" data-open="0">
        <button class="accBtn" type="button" data-acc="toggle">
          <span class="accChevron" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M7.4 8.6 12 13.2l4.6-4.6 1.4 1.4-6 6-6-6z"/></svg>
          </span>
          <span class="accLabel">مجوزها</span>
        </button>
        <div class="divider"></div>
        <div class="accPanel">
          <div class="grid">
            <a class="navyCard" href="exit-country.html">
              <span class="t">مجوز خروج از کشور</span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
            <a class="navyCard disabled" href="#" data-disabled="1">
              <span class="t">مجوز ورزشی <span class="badgeSoon">به‌زودی</span></span>
              <span class="arrow" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M10 6l6 6-6 6-1.4-1.4L13.2 12 8.6 7.4z"/></svg></span>
            </a>
          </div>
        </div>
      </div>

    </section>
  </main>

  <script>
    // Accordion toggle (single-open)
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-acc="toggle"]');
      if (!btn) return;

      const item = btn.closest('.accItem');
      const isOpen = item.getAttribute('data-open') === '1';

      document.querySelectorAll('.accItem').forEach(x => x.setAttribute('data-open', '0'));
      item.setAttribute('data-open', isOpen ? '0' : '1');
    });

    // Disabled cards
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[data-disabled="1"]');
      if (!a) return;
      e.preventDefault();
      alert('این صفحه هنوز ساخته نشده (به‌زودی).');
    });

    // Back button (Hub): no history.back to prevent loop
    (function () {
      const btn = document.getElementById("backBtn");
      if (!btn) return;

      btn.addEventListener("click", () => {
        const params = new URLSearchParams(location.search);
        const from = (params.get("from") || "").toLowerCase();

        if (from === "all") { location.href = "all.html"; return; }
        if (from === "index" || from === "landing" || from === "search") { location.href = "index.html"; return; }

        const hubFrom = sessionStorage.getItem("hubFrom");
        if (hubFrom) { location.href = hubFrom; return; }

        location.href = "index.html";
      });
    })();

    // ذخیره مبدا ورود به هاب (اگر قبلاً ست نشده)
    (function () {
      if (sessionStorage.getItem("hubFrom")) return;

      const params = new URLSearchParams(location.search);
      const from = (params.get("from") || "").toLowerCase();

      if (from === "all") { sessionStorage.setItem("hubFrom", "all.html"); return; }
      if (from === "index" || from === "landing" || from === "search") { sessionStorage.setItem("hubFrom", "index.html"); return; }

      try{
        const ref = document.referrer || "";
        if (ref.includes("all.html"))   { sessionStorage.setItem("hubFrom", "all.html"); return; }
        if (ref.includes("index.html")) { sessionStorage.setItem("hubFrom", "index.html"); return; }
      }catch(e){}

      sessionStorage.setItem("hubFrom", "index.html");
    })();

    // ذخیره مبدا برای دکمه بازگشت در صفحات سرویس (render.js)
    document.addEventListener("click", (e) => {
      const a = e.target.closest("a.navyCard");
      if (!a) return;
      if (a.matches("[data-disabled='1'], .disabled")) return;
      sessionStorage.setItem("serviceFrom", location.pathname + location.search);
    });
  </script>

</body>
</html>
