<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>پلیس +۱۰ افسریه | راهنمای خدمات</title>

<style>
:root{
  --ms-blue:#041E42;
  --white:#ffffff;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Tahoma, Arial, sans-serif;
  background:var(--ms-blue);
  color:var(--white);
  line-height:1.9;
}

.wrap{
  max-width:640px;
  margin:0 auto;
  padding:26px 16px 22px;
}

.brand{text-align:center;margin-bottom:6px;}
h1{text-align:center;font-size:20px;font-weight:900;margin:10px 0 4px;}

.search-box{margin-top:14px;margin-bottom:18px;}

/* آیتم ۱: یک ورودی غالب + پیشنهاد هوشمند عنوان خدمات */
.search-area{
  position:relative;
}

.search-input{
  width:100%;
  padding:16px 14px;
  border-radius:18px;
  border:none;
  font-size:14px;
  font-family:inherit;
}

.suggest{
  position:absolute;
  top:100%;
  right:0;
  left:0;
  margin-top:10px;
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.25);
  border-radius:16px;
  overflow:hidden;
  display:none; /* فقط وقتی نتیجه هست */
  filter:drop-shadow(0 10px 18px rgba(0,0,0,.25));
}

.suggest button{
  width:100%;
  background:transparent;
  border:none;
  padding:12px 14px;
  text-align:right;
  color:#fff;
  font-weight:900;
  font-family:inherit;
  cursor:pointer;
  border-bottom:1px solid rgba(255,255,255,.18);
}

.suggest button:last-child{border-bottom:none;}

.suggest button:hover,
.suggest button:focus{
  outline:none;
  background:rgba(255,255,255,.18);
}

.block{
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.25);
  border-radius:16px;
  padding:14px;
  margin-bottom:16px;
}

.block-title{text-align:center;font-weight:900;margin-bottom:10px;}

.popular{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

.tile{
  background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.25);
  border-radius:14px;
  padding:10px 12px;
  font-weight:900;
  display:flex;
  align-items:center;
  gap:12px;
  color:#fff;
  text-decoration:none;
}

.tile img{width:44px;height:44px;}

.internet-thin{
  display:block;
  margin-top:12px;
  text-decoration:none;
  background:rgba(255,255,255,.18);
  color:#fff;
  border:1px solid rgba(255,255,255,.28);
  border-radius:14px;
  padding:6px 12px;
  text-align:center;
  font-weight:900;
}

.note{
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.25);
  border-radius:14px;
  padding:12px;
  font-size:13px;
}

.footer{
  margin-top:18px;
  border-top:1px solid rgba(255,255,255,.25);
  padding-top:12px;
  display:flex;
  justify-content:space-between;
  gap:12px;
  font-size:12px;
}

.footer a{
  text-decoration:none;
  color:#fff;
  border:1px solid rgba(255,255,255,.35);
  border-radius:12px;
  padding:8px 12px;
  font-weight:900;
  background:rgba(255,255,255,.10);
}
</style>
</head>

<body>
<div class="wrap">

<div class="brand">
  <img src="assets/img/logo/logo_white.png" style="width:96px;">
</div>

<h1>برای چه کاری مراجعه کرده‌اید؟</h1>

<div class="search-box">
  <div class="search-area">
    <input id="search" class="search-input"
      placeholder="نام خدمت را بنویسید (مثلاً: گذرنامه، گواهینامه، ترخیص...)"
      autocomplete="off">

    <!-- پیشنهادهای عنوان خدمات -->
    <div id="suggest" class="suggest" aria-label="پیشنهاد خدمات"></div>
  </div>
</div>

<div class="block">
  <div class="block-title">خدمات پرتکرار</div>

  <div class="popular">
    <a class="tile" href="#"><img src="assets/img/icons/passport.png">گذرنامه</a>
    <a class="tile" href="#"><img src="assets/img/icons/tow.png">ترخیص خودرو / موتور</a>
    <a class="tile" href="#"><img src="assets/img/icons/license.png">گواهینامه</a>
    <a class="tile" href="#"><img src="assets/img/icons/other.png">سایر خدمات</a>
  </div>

  <a class="internet-thin" href="#">خدمات اینترنتی (غیرحضوری)</a>
</div>

<div class="note">
• حضور متقاضی در برخی خدمات الزامی است.<br>
• مدارک ناقص ممکن است پذیرش نشود.
</div>

<div class="footer">
  <div>
    آدرس: .................<br>
    ساعات کاری: .............
  </div>
  <div>
    <a href="#">تماس</a>
    <a href="hire.html">استخدام</a>
  </div>
</div>

</div>

<script>
/*
  آیتم ۱: پیشنهاد هوشمند عنوان خدمات (بدون مسیر جدا برای سؤال)
  توجه: آدرس‌ها را بعداً دقیق کنید. فعلاً نمونه گذاشته شده.
*/

const SERVICES = [
  { title: "گذرنامه", href: "#" },
  { title: "گواهینامه", href: "#" },
  { title: "ترخیص خودرو / موتور", href: "#" },
  { title: "خلافی خودرو", href: "#" },
  { title: "نظام وظیفه", href: "#" },
  { title: "کارت سوخت", href: "#" },
  { title: "ثبت املاک و اسکان", href: "#" },
  { title: "سایر خدمات", href: "#" }
];

const input = document.getElementById("search");
const suggest = document.getElementById("suggest");

function norm(s){
  return (s || "")
    .toString()
    .trim()
    .replace(/\s+/g," ")
    .toLowerCase();
}

function renderSuggestions(items){
  suggest.innerHTML = "";
  if (!items.length){
    suggest.style.display = "none";
    return;
  }

  items.slice(0,6).forEach(item=>{
    const btn = document.createElement("button");
    btn.type = "button";
    btn.textContent = item.title;
    btn.onclick = ()=>{
      input.value = item.title;
      suggest.style.display = "none";
      // رفتن به صفحه خدمت
      window.location.href = item.href;
    };
    suggest.appendChild(btn);
  });

  suggest.style.display = "block";
}

function update(){
  const q = norm(input.value);

  // اگر چیزی تایپ نشده، پیشنهادهای پایه را نشان بده (برای کاربر QR)
  if (!q){
    renderSuggestions(SERVICES);
    return;
  }

  const matches = SERVICES.filter(s=>{
    const t = norm(s.title);
    // شامل شدن ساده (هوشمندی سبک و قابل اتکا)
    return t.includes(q);
  });

  renderSuggestions(matches);
}

input.addEventListener("input", update);
input.addEventListener("focus", update);

// کلیک بیرون: بستن پیشنهادها
document.addEventListener("click", (e)=>{
  if (!e.target.closest(".search-area")) {
    suggest.style.display = "none";
  }
});

// Enter: اگر دقیقاً یکی match شد برو همان
input.addEventListener("keydown", (e)=>{
  if (e.key !== "Enter") return;

  const q = norm(input.value);
  if (!q) return;

  const exact = SERVICES.find(s => norm(s.title) === q);
  if (exact){
    window.location.href = exact.href;
    return;
  }

  const matches = SERVICES.filter(s => norm(s.title).includes(q));
  if (matches.length === 1){
    window.location.href = matches[0].href;
  } else {
    // اگر چندتا بود، لیست را باز نگه دار تا انتخاب کند
    renderSuggestions(matches);
  }
});
</script>

</body>
</html>
